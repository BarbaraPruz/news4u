(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(e,n,t){e.exports=t.p+"static/media/holdingnewspaper2.50d2beca.jpg"},55:function(e,n,t){e.exports=t(83)},60:function(e,n,t){},67:function(e,n,t){},83:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(29),c=t.n(o),u=t(88),i=t(53),l=(t(60),t(12)),s=t(24),p=t(46),h=t(18);var d=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,statusMessage:"",newsSources:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOGIN_USER":return Object(h.a)({},e,{statusMessage:"",jwt:n.token,id:n.id});case"SET_USER_PREFERENCES":return Object(h.a)({},e,{isLoggedIn:!0,newsSources:n.payload.news_sources});case"UPDATE_USER_PREFERENCES":return Object(h.a)({},e,{newsSources:n.payload.news_sources});case"LOGGING_OUT":return Object(h.a)({},e,{jwt:null,id:0,isLoggedIn:!1});case"SET_USER_MESSAGE":return Object(h.a)({},e,{statusMessage:n.payload});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{headlines:[],allSources:[],articles:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GET_HEADLINES":return Object(h.a)({},e,{headlines:n.payload});case"GET_NEWS_SOURCES":var t=n.payload.map(function(e){return e.news_source_id=e.id,delete e.id,e});return Object(h.a)({},e,{allSources:t});case"SEARCH_NEWS":return Object(h.a)({},e,{articles:n.payload});case"SEARCH_CLEAR":return Object(h.a)({},e,{articles:[]});default:return e}}}),f=t(4),m=t(5),g=t(7),b=t(6),E=t(8),j=t(87),v=(t(67),t(2)),O=t(20),S=t(3);function w(){var e=Object(v.a)(["\n    color: red;\n    font-size: 1.5em;\n"]);return w=function(){return e},e}var y=S.a.div(w()),x=function(e){function n(){return Object(f.a)(this,n),Object(g.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){return a.a.createElement(y,null,this.props.message)}}]),n}(r.Component),k=Object(l.b)(function(e){return{message:e.user.statusMessage}})(x);function C(){var e=Object(v.a)(["\n    padding-top: 2em;\n    font-size: 90%;\n"]);return C=function(){return e},e}function _(){var e=Object(v.a)(["\n    color: #white;\n    background-color:#3F5941;\n    display: block;\n    margin: auto;\n    display: inline;\n"]);return _=function(){return e},e}function I(){var e=Object(v.a)(["\n    color: #464240;\n    display: block;\n    margin: auto;\n"]);return I=function(){return e},e}function N(){var e=Object(v.a)(["\n    width:75%;\n    margin: 1em auto 1em auto;\n    padding: 0.5em;\n    color: #464240;\n    @media (max-width: 1200px) {\n        width: 90%;\n    }      \n"]);return N=function(){return e},e}function U(){var e=Object(v.a)(["\n    background-color: #464240; \n    color: #f2efef;\n    margin-left: auto;\n    margin-right: auto;\n    width: 30%;\n    margin-top: 225px;\n    text-align: center;\n    border-radius: 10px;\n    padding: 2em;\n    box-shadow: 0px 0px 10px 10px #464240;\n    @media (max-width: 1200px) {\n        width: 100%;\n    }    \n"]);return U=function(){return e},e}var L=S.a.div(U()),T=S.a.input(N()),A=S.a.button(I()),R=S.a.button(_()),F=S.a.p(C()),H=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(a)))).state={email:"",password:""},t.handleSignUp=function(e){e.preventDefault(),t.props.handleSubmit(t.state)},t.handleChange=function(e){return t.setState(Object(O.a)({},e.target.name,e.target.value))},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(L,null,a.a.createElement("h1",null,"news4u sign up"),a.a.createElement(k,null),a.a.createElement("form",{onSubmit:function(n){return e.handleSignUp(n)}},a.a.createElement(T,{type:"text",name:"email",onChange:function(n){return e.handleChange(n)},placeholder:"User Email"}),a.a.createElement(T,{type:"password",name:"password",onChange:function(n){return e.handleChange(n)},placeholder:"Password"}),a.a.createElement(A,{type:"submit"},"Sign Up")),a.a.createElement(F,null,"Already registered? ",a.a.createElement(R,{onClick:this.props.handleSwitchForm},"Login!")))}}]),n}(r.Component),P=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(a)))).state={email:"",password:""},t.handleChange=function(e){return t.setState(Object(O.a)({},e.target.name,e.target.value))},t.handleLogin=function(e){e.preventDefault(),t.props.handleSubmit(t.state)},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(L,null,a.a.createElement("h1",null,"news4u login"),a.a.createElement(k,null),a.a.createElement("form",{onSubmit:function(n){return e.handleLogin(n)}},a.a.createElement(T,{type:"text",name:"email",onChange:function(n){return e.handleChange(n)},placeholder:"User Email"}),a.a.createElement(T,{type:"password",name:"password",onChange:function(n){return e.handleChange(n)},placeholder:"Password"}),a.a.createElement(A,{type:"submit"},"Login")),a.a.createElement(F,null,"New to news4u? ",a.a.createElement(R,{onClick:this.props.handleSwitchForm},"Sign Up!")))}}]),n}(r.Component),G=t(49),D=t.n(G);function z(e){if(!e.ok)throw Error(e.statusText);return e}function M(e){return{type:"SET_USER_MESSAGE",payload:e}}function W(e){return function(n){n(M("Logging in..."));var t={auth:{email:e.email,password:e.password}},r={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch("api/user_token",r).then(function(e){return z(e)}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("jwt",e.jwt);var t=D()(e.jwt).sub;n({type:"LOGIN_USER",token:e.jwt,id:t}),n(function(e){return function(n){var t=localStorage.getItem("jwt");return fetch("/api/users/".concat(e),{headers:new Headers({Authorization:"Bearer ".concat(t),"Content-Type":"application/json"})}).then(function(e){return z(e)}).then(function(e){return e.json()}).then(function(e){n({type:"SET_USER_PREFERENCES",payload:e})}).catch(function(e){console.log(e)})}}(t))}).catch(function(e){console.log("Login Error",e),n(M("Login ".concat(e)))})}}var B=t(50),J=t.n(B);function K(){var e=Object(v.a)(["\n    min-height: 100%;\n    width: 100%;\n    height: auto;\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: -1;\n    background-image: url(",");\n    background-size: cover; \n"]);return K=function(){return e},e}var Y=S.a.div(K(),J.a),q=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(a)))).state={newUser:!1},t.handleSwitchForm=function(){t.setState(function(e){return{newUser:!e.newUser}})},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this.state.newUser?a.a.createElement(H,{handleSwitchForm:this.handleSwitchForm,handleSubmit:this.props.signUpUser}):a.a.createElement(P,{handleSwitchForm:this.handleSwitchForm,handleSubmit:this.props.loginUser});return a.a.createElement(Y,null,e)}}]),n}(r.Component),V=Object(l.b)(null,{loginUser:W,signUpUser:function(e,n){return function(n){n(M("Signing up..."));var t={user:{email:e.email,password:e.password}},r={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch("api/users",r).then(function(e){return z(e)}).then(function(e){return e.json()}).then(function(t){n(W(e))}).catch(function(e){console.log("Signup Error",e),n(M("Sign Up ".concat(e)))})}}})(q),Q=function(e){function n(){return Object(f.a)(this,n),Object(g.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){return this.props.userLoggedIn?a.a.createElement(j.a,{to:{pathname:"/headlines"}}):a.a.createElement("div",{className:"App"},a.a.createElement("section",null,a.a.createElement(V,null)))}}]),n}(r.Component),X=Object(l.b)(function(e){return{userLoggedIn:e.user.isLoggedIn}})(Q),Z=function(){return a.a.createElement("div",{className:"content-section"},a.a.createElement("h1",null,"News4u - Customize your news feed!"),a.a.createElement("h2",null,a.a.createElement("em",null,"A Flatiron Online Bootcamp Portfolio Project with Rails and React/Redux")),a.a.createElement("p",null,"The News4u app lets users retrieve headlines and stories from different news sources. News is retrieved from ",a.a.createElement("a",{href:"https://newsapi.org/",target:"_blank",rel:"noopener noreferrer"},"NewsAPI.org"),". News sources available through News4u app are limited to English."),a.a.createElement("p",null,a.a.createElement("a",{href:"https://unsplash.com/@rawpixel",target:"_blank",rel:"noopener noreferrer"},"Photo by @rawpixel on Unsplash")),a.a.createElement("p",null,"Anyone can sign up (no current validation of email). Or for a quick try, use one of the following logins (password 'test')"),a.a.createElement("ul",null,a.a.createElement("li",null,"waltercronkite@domain.com"),a.a.createElement("li",null,"jonstewart@domain.com"),a.a.createElement("li",null,"aaronrodgers@domain.com"),a.a.createElement("li",null,"avi@domain.com")),a.a.createElement("p",null,"Stay informed!"))},$=t(25),ee="c538607ebe2d47a1a6a7561178e25f37";function ne(e){if(!e.ok)throw Error(e.statusText);return e}function te(){var e=Object(v.a)(["\n    overflow: hidden;\n"]);return te=function(){return e},e}function re(){var e=Object(v.a)(["\n    float: left;\n    height: 220px; \n    margin-top:20px;\n    padding-right: 2em; \n    @media (max-width: 1200px) {\n        width: 100%;\n        height: auto;\n        float: none;\n        margin: 0;\n        padding: none;\n    }  \n"]);return re=function(){return e},e}function ae(){var e=Object(v.a)(["\n  padding: 1em;\n  margin: 5px auto 5px auto;\n  background: white;\n  color:#595959;\n  text-align: left;\n  font-size: 15px;\n  height: auto;\n  width: 90%;\n  float: left;\n  @media (max-width: 1200px) {\n    width: 100%;\n    float: none;\n}   \n"]);return ae=function(){return e},e}var oe=S.a.div(ae()),ce=S.a.img(re()),ue=S.a.div(te()),ie=function(e){function n(){return Object(f.a)(this,n),Object(g.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){return a.a.createElement(oe,null,null!=this.props.headline.urlToImage?a.a.createElement(ce,{src:this.props.headline.urlToImage}):null,a.a.createElement(ue,null,a.a.createElement("h3",null,this.props.headline.title),a.a.createElement("h5",null,this.props.headline.source.name," at ",this.props.headline.publishedAt),a.a.createElement("h5",null,this.props.headline.description),a.a.createElement("p",null,this.props.headline.content),a.a.createElement("h6",null,a.a.createElement("a",{href:this.props.headline.url,target:"_blank",rel:"noopener noreferrer"},"Full Article"))))}}]),n}(r.Component);function le(){var e=Object(v.a)(["\n    margin-right: 20px;\n"]);return le=function(){return e},e}function se(){var e=Object(v.a)(["\n    font-size: 1.5em;\n    margin-right: 20px;\n"]);return se=function(){return e},e}function pe(){var e=Object(v.a)(["\n  padding: 1em;\n  margin: 10px auto 10px auto;\n  border: 1px solid #3F5941;\n  border-radius: 5px;      \n  height: auto;\n  width: 100%;\n"]);return pe=function(){return e},e}var he=S.a.form(pe()),de=S.a.label(se()),fe=S.a.label(le()),me=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(o)))).isChecked=function(e){return t.props.selectedSources.includes(e)},t.renderSources=function(){return t.props.allSources.map(function(e,n){return a.a.createElement(fe,{key:e},e,a.a.createElement("input",{type:"checkbox",onChange:t.props.onChange,checked:t.isChecked(e),value:e}))})},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(he,null,a.a.createElement(de,null,"News Sources:"),this.renderSources()))}}]),n}(r.Component),ge=function(e){function n(e){var t;Object(f.a)(this,n),(t=Object(g.a)(this,Object(b.a)(n).call(this,e))).onChange=function(e){var n=e.target.value,r=t.state.selectedSources,a=r.indexOf(n);a>=0?r.splice(a,1):r.push(n),t.setState({selectedSources:r})};var r=e.newsSources.map(function(e){return e.name||e.news_source_id});return t.state={selectedSources:r,allSources:r.slice(0)},t.renderHeadlines=t.renderHeadlines.bind(Object($.a)(t)),t.filterHeadlines=t.filterHeadlines.bind(Object($.a)(t)),t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"filterHeadlines",value:function(){var e=this;return this.props.headlines.filter(function(n){return e.state.selectedSources.includes(n.source.name)})}},{key:"renderHeadlines",value:function(){return this.filterHeadlines().map(function(e,n){return a.a.createElement(ie,{headline:e,key:n})})}},{key:"componentDidMount",value:function(){this.props.isLoggedIn&&this.props.getHeadlines(this.props.newsSources)}},{key:"render",value:function(){return this.props.isLoggedIn?a.a.createElement("div",{className:"content-section"},a.a.createElement("h1",null,"Headlines"),a.a.createElement(me,{onChange:this.onChange,allSources:this.state.allSources,selectedSources:this.state.selectedSources}),this.renderHeadlines()):a.a.createElement("p",null,"You need to be logged in to use this option")}}]),n}(r.Component),be=Object(l.b)(function(e){return{isLoggedIn:e.user.isLoggedIn,newsSources:e.user.newsSources,headlines:e.news.headlines}},{getHeadlines:function(e){var n=e.map(function(e){return e.news_source_id});return function(e){e({type:"GETTING_HEADLINES"});var t="sources="+n.join();fetch("https://newsapi.org/v2/top-headlines?"+t+"&apiKey="+ee).then(function(e){return ne(e)}).then(function(e){return e.json()}).then(function(n){return e({type:"GET_HEADLINES",payload:n.articles})}).catch(function(e){console.log(e)})}}})(ge);function Ee(){var e=Object(v.a)(["\n    padding-left: 10px;\n    background-color: dodgerblue;\n    border: 1px solid #ddd;\n    color: white;\n    cursor: pointer;\n"]);return Ee=function(){return e},e}function je(){var e=Object(v.a)(["\n    vertical-align: middle;\n    margin: 5px 10px 5px 0;\n    padding: 10px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    width: 50%;\n"]);return je=function(){return e},e}function ve(){var e=Object(v.a)(["\n    margin: 5px 10px 5px 10px;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(v.a)(["\n    display: block;\n    text-align: center;\n    border: 1px solid #5d5856;\n    border-radius: 5px;\n    width: 60%;\n    margin: auto;\n"]);return Oe=function(){return e},e}var Se=S.a.div(Oe()),we=S.a.label(ve()),ye=S.a.input(je()),xe=S.a.button(Ee()),ke=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(a)))).state={topic:""},t.handleSubmit=function(e){e.preventDefault(),t.props.handleSearch(t.state)},t.handleChange=function(e){return t.setState(Object(O.a)({},e.target.name,e.target.value))},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(Se,null,a.a.createElement("form",{onSubmit:function(n){return e.handleSubmit(n)}},a.a.createElement(we,null,"Topic"),a.a.createElement(ye,{type:"text",name:"topic",onChange:function(n){return e.handleChange(n)},placeholder:"Search Topic"}),a.a.createElement(xe,{type:"submit"},"Search")))}}]),n}(r.Component);function Ce(){var e=Object(v.a)(["\n  padding: 1em;\n  margin: 10px auto 10px auto;\n  background: white;\n  color:#595959;\n  text-align: left;\n  font-size: 15px;\n  height: auto;\n  width: 90%;\n"]);return Ce=function(){return e},e}var _e=S.a.div(Ce()),Ie=function(e){return a.a.createElement(_e,null,a.a.createElement("h2",null,e.article.title),a.a.createElement("h5",null,"Author: ",e.article.author),a.a.createElement("h5",null,e.article.source.name," - ",e.article.publishedAt),a.a.createElement("p",null,e.article.content),a.a.createElement("h6",null,a.a.createElement("a",{href:e.article.url,target:"_blank",rel:"noopener noreferrer"},"Full Article")))},Ne=function(e){function n(){return Object(f.a)(this,n),Object(g.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(E.a)(n,e),Object(m.a)(n,[{key:"componentWillUnmount",value:function(){this.props.searchClearResults()}},{key:"render",value:function(){return a.a.createElement("div",{className:"search_results"},a.a.createElement("h2",null,"Search Results"),this.props.articles.map(function(e,n){return a.a.createElement(Ie,{key:n,article:e})}))}}]),n}(r.Component),Ue=Object(l.b)(function(e){return{articles:e.news.articles}},{searchClearResults:function(){return{type:"SEARCH_CLEAR"}}})(Ne),Le=function(e){function n(e){var t;return Object(f.a)(this,n),(t=Object(g.a)(this,Object(b.a)(n).call(this,e))).handleSearch=t.handleSearch.bind(Object($.a)(t)),t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"handleSearch",value:function(e){this.props.searchNews(this.props.newsSources,e)}},{key:"render",value:function(){return this.props.isLoggedIn?a.a.createElement("div",{className:"content-section"},a.a.createElement("h1",null,"Search for Stories"),a.a.createElement(ke,{handleSearch:this.handleSearch}),a.a.createElement(Ue,null)):a.a.createElement("p",null,"You need to be logged in to use this option")}}]),n}(r.Component),Te=Object(l.b)(function(e){return{isLoggedIn:e.user.isLoggedIn,newsSources:e.user.newsSources}},{searchNews:function(e,n){var t=e.map(function(e){return e.news_source_id}),r=n.topic;return function(e){e({type:"GETTING_HEADLINES"});var n="&sources="+t.join(),a="https://newsapi.org/v2/everything?q="+r+n+"&apiKey="+ee;console.log("going to search",a),fetch(a).then(function(e){return ne(e)}).then(function(e){return e.json()}).then(function(n){return e({type:"SEARCH_NEWS",payload:n.articles})}).catch(function(e){console.log(e)})}}})(Le);function Ae(){var e=Object(v.a)(["\n    color: #3F5941;\n"]);return Ae=function(){return e},e}function Re(){var e=Object(v.a)(["\n    padding-top: 12px;\n    padding-bottom: 12px;\n    text-align: left;\n    background-color: #3F5941;\n    color: white;\n    margin: 2px;\n    text-align: center;\n"]);return Re=function(){return e},e}function Fe(){var e=Object(v.a)(["\n    margin: 2px;\n    text-align: center;\n"]);return Fe=function(){return e},e}function He(){var e=Object(v.a)(["\n    &:nth-child(even){background-color: #e6e6e6;}\n"]);return He=function(){return e},e}function Pe(){var e=Object(v.a)(["\n    padding-top: 12px;\n      padding-bottom: 12px;\n      text-align: left;\n      background-color: #3F5941;\n      color: white;\n"]);return Pe=function(){return e},e}function Ge(){var e=Object(v.a)(["\n    color:#595959;\n"]);return Ge=function(){return e},e}var De=S.a.table(Ge()),ze=S.a.th(Pe()),Me=S.a.tr(He()),We=S.a.td(Fe()),Be=S.a.td(Re()),Je=S.a.a(Ae()),Ke=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Me,null,a.a.createElement(We,null,a.a.createElement("input",{className:"formCheckInput",type:"checkbox",onChange:e.onChange,checked:e.checkVal,value:e.val})),a.a.createElement("td",null,e.source.name),a.a.createElement("td",null,e.source.category),a.a.createElement("td",null,e.source.description),a.a.createElement("td",null,a.a.createElement(Je,{href:e.source.url,target:"_blank",rel:"noopener noreferrer"},e.source.url))))},Ye=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(o)))).renderNewsSources=function(){return t.props.allSources.map(function(e,n){return a.a.createElement(Ke,{key:n,val:e.news_source_id,onChange:t.props.onChange,source:e,checkVal:t.isUserSource(e)})})},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"isUserSource",value:function(e){return this.props.selectedSources.findIndex(function(n){return n.news_source_id===e.news_source_id})>=0}},{key:"render",value:function(){return a.a.createElement(De,null,a.a.createElement("tbody",null,a.a.createElement(Me,null,a.a.createElement(Be,null,"\u2714"),a.a.createElement(ze,null,"Source"),a.a.createElement(ze,null,"Category"),a.a.createElement(ze,null,"Description"),a.a.createElement(ze,null,"URL")),this.renderNewsSources()))}}]),n}(r.Component);function qe(){var e=Object(v.a)(["\n    background-color: #3F5941;\n    color: white;\n    display: block;\n    margin: auto;\n    font-size: 1.5em;\n"]);return qe=function(){return e},e}function Ve(){var e=Object(v.a)(["\n  padding: 1em;\n  margin: 1em auto 1em auto;\n  background: white;\n  color:#595959;\n  text-align: left;\n  font-size: 15px;\n  height: auto;\n  width: 90%;\n"]);return Ve=function(){return e},e}var Qe=S.a.div(Ve()),Xe=S.a.button(qe()),Ze=function(e){function n(){var e,t;Object(f.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(g.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(a)))).state={selectedSources:[]},t.handleSubmit=function(e){e.preventDefault(),t.props.updateUserPreferences(t.props.userId,{newsSources:t.state.selectedSources}),t.props.history.push("/")},t.onChange=function(e){var n=e.target.value,r=t.state.selectedSources,a=r.findIndex(function(e){return e.news_source_id===n});a>=0?r.splice(a,1):r.push(t.props.allSources.find(function(e){return e.news_source_id===n})),t.setState({selectedSources:r})},t}return Object(E.a)(n,e),Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.isLoggedIn&&(0===this.props.allSources.length&&this.props.getNewsSources(),this.setState({selectedSources:this.props.userNewsSources}))}},{key:"render",value:function(){var e=this;return this.props.isLoggedIn?a.a.createElement(Qe,null,a.a.createElement("h1",null,"Preferences"),a.a.createElement("form",{onSubmit:function(n){return e.handleSubmit(n)}},a.a.createElement(Ye,{onChange:this.onChange,allSources:this.props.allSources,selectedSources:this.state.selectedSources}),a.a.createElement(Xe,{type:"submit"},"Save"))):a.a.createElement("p",null,"You need to be logged in to use this option")}}]),n}(r.Component),$e=Object(l.b)(function(e){return{userId:e.user.id,isLoggedIn:e.user.isLoggedIn,userNewsSources:e.user.newsSources,allSources:e.news.allSources}},{getNewsSources:function(){return function(e){e({type:"GETTING_NEWS_SOURCES"}),fetch("https://newsapi.org/v2/sources?language=en&apiKey="+ee).then(function(e){return ne(e)}).then(function(e){return e.json()}).then(function(n){return e({type:"GET_NEWS_SOURCES",payload:n.sources})}).catch(function(e){console.log(e)})}},updateUserPreferences:function(e,n){return function(t){var r=localStorage.getItem("jwt"),a={method:"PATCH",body:JSON.stringify(n),headers:new Headers({Authorization:"Bearer ".concat(r),"Content-Type":"application/json"})};fetch("/api/users/".concat(e),a).then(function(e){return z(e)}).then(function(e){return e.json()}).then(function(e){return t({type:"UPDATE_USER_PREFERENCES",payload:e})}).catch(function(e){console.log(e)})}}})(Ze),en=t(89),nn=t(86),tn=t(85);function rn(){var e=Object(v.a)(["\n    width: 100px;\n    padding: 12px;\n    margin: 0 6px 0px 0px;\n    textDecoration: none;\n    color: black;\n    font-size: 18px;\n"]);return rn=function(){return e},e}function an(){var e=Object(v.a)(["\n    padding: 5px 12px 12px 12px;\n    margin: 0 0 0 0.5em;\n    color: #3F5941;\n    font-size: 48px;\n    font-weight: bold;\n    font-family: Impact, Times New Roman, Times, serif;\n"]);return an=function(){return e},e}function on(){var e=Object(v.a)(["\n  width: 100%;\n  border: solid 5px #3F5941;\n  background-color: white;\n  color: #3F5941;\n  text-align: left;\n  position: fixed;\n  top: 0; \n"]);return on=function(){return e},e}var cn=Object(S.a)(nn.a)(on()),un=Object(S.a)(en.a)(an()),ln=Object(S.a)(tn.a.Link)(rn()),sn=function(e){function n(){return Object(f.a)(this,n),Object(g.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(E.a)(n,e),Object(m.a)(n,[{key:"render",value:function(){var e=null,n=null;return this.props.userLoggedIn&&(e=a.a.createElement(a.a.Fragment,null,a.a.createElement(ln,{href:"/headlines"},"Headlines"),a.a.createElement(ln,{href:"/search"},"Search"),a.a.createElement(ln,{href:"/users/".concat(this.props.userId,"/edit")},"Preferences")),n=a.a.createElement(ln,{href:"/users/".concat(this.props.userId,"/logout")},"Logout")),a.a.createElement(cn,{collapseOnSelect:!0,expand:"lg"},a.a.createElement(un,{to:"/",exact:!0,activeStyle:{textDecoration:"underline"}},"news4u"),a.a.createElement(nn.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),a.a.createElement(nn.a.Collapse,{id:"responsive-navbar-nav"},a.a.createElement(tn.a,null,e,a.a.createElement(ln,{href:"/about"},"About"),n)))}}]),n}(r.Component),pn=Object(l.b)(function(e){return{userLoggedIn:e.user.isLoggedIn,userId:e.user.id}})(sn),hn=function(e){function n(){return Object(f.a)(this,n),Object(g.a)(this,Object(b.a)(n).apply(this,arguments))}return Object(E.a)(n,e),Object(m.a)(n,[{key:"componentDidMount",value:function(){console.log("Logout!"),this.props.logoutUser(),this.props.history.push("/")}},{key:"render",value:function(){return null}}]),n}(r.Component),dn=Object(l.b)(null,{logoutUser:function(){return function(e){e({type:"LOGGING_OUT"});var n=localStorage.getItem("jwt"),t={method:"POST",headers:new Headers({Authorization:"Bearer ".concat(n),"Content-Type":"application/json"})};fetch("/api/invalidate_token",t).then(function(e){return z(e)}).then(function(n){localStorage.setItem("jwt",""),e({type:"LOGOUT_USER",payload:n})}).catch(function(e){console.log(e)})}}})(hn),fn=function(){return a.a.createElement("footer",null,a.a.createElement("div",null,"News Content provided through ",a.a.createElement("a",{href:"https://newsapi.org/",target:"_blank",rel:"noopener noreferrer"},"NewsAPI.org"),". \xa0",a.a.createElement("a",{href:"https://unsplash.com/@rawpixel",target:"_blank",rel:"noopener noreferrer"},"Photo by @rawpixel on Unsplash")))};c.a.render(a.a.createElement(function(e){return a.a.createElement(l.a,{store:Object(s.d)(d,Object(s.a)(p.a))},e.children)},null,a.a.createElement(u.a,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(pn,null),a.a.createElement(i.a,{exact:!0,path:"/",component:X}),a.a.createElement(i.a,{exact:!0,path:"/about",component:Z}),a.a.createElement(i.a,{exact:!0,path:"/headlines",component:be}),a.a.createElement(i.a,{exact:!0,path:"/search",component:Te}),a.a.createElement(i.a,{path:"/users/:id/edit",component:$e}),a.a.createElement(i.a,{path:"/users/:id/logout",component:dn}),a.a.createElement(fn,null)))),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.32c881ca.chunk.js.map